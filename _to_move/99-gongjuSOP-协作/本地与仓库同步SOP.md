# 本地与仓库同步SOP

> **用途**：规范本地dedao/与GitHub仓库的同步流程  
> **频率**：建议每周同步一次  
> **维护者**：常松阳

---

## 🎯 同步原则

### 核心规则

1. **本地→仓库**：
   - ✅ 同步：完成的案例/模型/洞察
   - ❌ 不同步：课程原文、临时文件、个人笔记

2. **仓库→本地**：
   - ✅ 同步：系统指令更新、框架调整
   - 触发：按需同步（有重大更新时）

3. **质量标准**：
   - 文档必须完整（所有必要章节）
   - 已去除课程原文引用
   - 索引已更新
   - 文件命名符合规范

---

## 📤 从本地同步到仓库

### 场景1：新拆解的商业案例

**前置检查**：
- [ ] 案例文档已完成（包含所有必要部分）
- [ ] 已去除课程原文直接引用（改为"根据课程材料整理"）
- [ ] 已更新本地的 `案例总索引.md`
- [ ] 文件命名符合规范：`<企业名>-<关键词>.md`

**同步步骤**：

```bash
# 说明：
# - 本地工作区：你的dedao独立工作区（不在仓库中）
# - 仓库目录：./（当前目录）

# 1. 从本地复制案例到仓库
# 从你的dedao独立工作区复制到仓库对应目录
# 示例：cp <你的dedao工作区路径>/01_案例库/按行业分类/<行业>/<案例文件>.md \
#      ./shangye-anli/01_案例库/按行业分类/<行业>/

# 2. 更新仓库的案例总索引
# 手动编辑 shangye-anli/01_案例库/案例总索引.md
# 添加新案例条目

# 3. Git提交
git add shangye-anli/01_案例库/
git commit -m "feat: 新增<企业名>案例拆解"
git push
```

**质量检查**：
- [ ] 案例文档无课程原文引用
- [ ] 案例总索引已更新
- [ ] Git提交完成

---

### 场景2：新提炼的商业模型

**前置检查**：
- [ ] 模型文档已完成
- [ ] 包含：机制、变量、边界、验证方式
- [ ] 至少有2-3个支撑案例
- [ ] 已更新本地的 `模型总索引.md`

**同步步骤**：

```bash
# 1. 从本地复制模型到仓库
# 从你的dedao独立工作区复制到仓库对应目录
# 示例：cp <你的dedao工作区路径>/02_模型库/<类型>/<模型文件>.md \
#      ./shangye-anli/02_模型库/<类型>/

# 2. 更新仓库的模型总索引
# 手动编辑 shangye-anli/02_模型库/模型总索引.md

# 3. Git提交
git add shangye-anli/02_模型库/
git commit -m "feat: 新增<模型名>商业模型"
git push
```

---

### 场景3：新归纳的跨案例洞察

**前置检查**：
- [ ] 洞察文档已完成
- [ ] 包含：主题、机制、可证伪条件、验证计划
- [ ] 至少对比2-3个案例
- [ ] 已更新本地的 `洞察总索引.md`

**同步步骤**：

```bash
# 1. 从本地复制洞察到仓库
# 从你的dedao独立工作区复制到仓库对应目录
# 示例：cp <你的dedao工作区路径>/03_洞察库/<洞察文件>.md \
#      ./shangye-anli/03_洞察库/

# 2. 更新仓库的洞察总索引
# 手动编辑 shangye-anli/03_洞察库/洞察总索引.md

# 3. Git提交
git add shangye-anli/03_洞察库/
git commit -m "feat: 新增<主题>跨案例洞察"
git push
```

---

## 📥 从仓库同步到本地

### 场景1：系统指令更新

**触发条件**：
- 系统指令有重大更新（如新增步骤、调整框架）
- 收到团队通知

**同步步骤**：

```bash
# 1. 从仓库拉取最新版本
git pull

# 2. 复制更新的系统指令到本地
# 从仓库复制到你的dedao独立工作区
# 示例：cp ./shangye-anli/00_系统指令/*.md <你的dedao工作区路径>/00_系统指令/

# 3. 验证本地工作区使用最新指令
echo "✅ 系统指令已更新到最新版本"
ls -lh <你的dedao工作区路径>/00_系统指令/
```

---

### 场景2：框架文档更新

**触发条件**：
- README有重要调整
- 流程规范有变化

**同步步骤**：

```bash
# 1. 从仓库拉取最新版本
git pull

# 2. 复制更新的README到本地
# 从仓库复制到你的dedao独立工作区
# 示例：
# cp ./shangye-anli/README.md <你的dedao工作区路径>/
# cp ./shangye-anli/01_案例库/README.md <你的dedao工作区路径>/01_案例库/
# ... 其他需要的README

# 3. 调整本地工作流（如有需要）
echo "✅ 框架文档已同步"
```

---

## ⚠️ 注意事项

### 禁止同步的内容

**从本地→仓库（禁止）**：
- ❌ 课程原文件（`<你的dedao工作区路径>/04_原著笔记/MD/*.md`）
- ❌ 临时工作文件（`*.tmp`, `*.bak`）
- ❌ 个人笔记（未经整理的碎片）
- ❌ 带有课程原文直接引用的案例

**从仓库→本地（通常不需要）**：
- ❌ 理论文档（01-dao/, 02-shu/）：通过Claude Projects访问即可
- ❌ RAG索引：本地不需要完整RAG系统

---

### 同步前检查清单

**文档质量**：
- [ ] 文档结构完整（所有必要章节）
- [ ] 内容符合质量标准
- [ ] 已去除课程原文引用
- [ ] 语言表达清晰、逻辑连贯

**索引更新**：
- [ ] 对应的总索引已更新（案例/模型/洞察）
- [ ] 索引信息准确（标题、路径、标签）

**文件规范**：
- [ ] 文件命名符合规范
- [ ] 存储路径正确
- [ ] Markdown格式正确

**Git提交**：
- [ ] 提交信息清晰（feat/docs/chore）
- [ ] 只提交相关文件
- [ ] 提交前已测试

---

## 📋 同步记录模板

建议在你的dedao独立工作区的 `05_学习记录/` 维护同步记录：

```markdown
# 同步记录 - YYYY-MM-DD

## 本次同步内容

### 新增案例（X个）
- [企业名]-[关键词].md - [行业] - [状态]

### 新增模型（X个）
- [模型名].md - [类型] - [支撑案例数]

### 新增洞察（X个）
- 洞察[编号]-[主题].md - [对比案例数]

## 质量检查

- [ ] 所有文档已去除课程引用
- [ ] 索引已更新
- [ ] Git提交完成

## 下次计划

- [ ] 待同步内容...
```

---

## 📊 同步频率建议

| 内容类型 | 建议频率 | 触发条件 |
|---------|---------|---------|
| **新案例** | 每周一次 | 完成2-3个案例后 |
| **新模型** | 每2周一次 | 提炼新模型后 |
| **新洞察** | 每月一次 | 跨案例对比完成后 |
| **系统指令** | 按需 | 仓库通知更新 |

---

## 💡 最佳实践

1. **小步快跑**：
   - 完成一个案例就同步一个
   - 不要积累太多未同步内容

2. **保持质量**：
   - 同步前必须质量检查
   - 宁可慢一点，不要返工

3. **及时更新索引**：
   - 每次同步都更新总索引
   - 索引是检索的入口

4. **记录同步日志**：
   - 维护同步记录
   - 方便复盘和追溯

---

**文档版本**：v1.0  
**创建日期**：2026-01-04  
**维护者**：常松阳  
**相关文档**：
- `shangye-anli/README.md` - 项目说明
- `99-gongjuSOP/知识库/知识库构建SOP.md` - 知识库构建流程
- `99-gongjuSOP/写作/新文档写作框架指南.md` - 写作规范

# RAGç³»ç»Ÿä¾èµ–å®‰è£…æŒ‡å—

> è§£å†³ç½‘ç»œ/ä»£ç†é—®é¢˜ï¼ŒæˆåŠŸå®‰è£…Pythonä¾èµ–åŒ…

---

## ğŸ” é—®é¢˜è¯Šæ–­

å¦‚æœé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š
```
ValueError: check_hostname requires server_hostname
```

è¿™é€šå¸¸æ˜¯**ä»£ç†é…ç½®é—®é¢˜**å¯¼è‡´çš„ã€‚

---

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šé…ç½®pipä»£ç†ï¼ˆæ¨èï¼‰

#### Windows PowerShell

```powershell
# è®¾ç½®ä»£ç†ï¼ˆå¦‚æœæœ‰ï¼‰
$env:HTTP_PROXY = "http://proxy.example.com:8080"
$env:HTTPS_PROXY = "http://proxy.example.com:8080"

# æˆ–ç¦ç”¨ä»£ç†
$env:HTTP_PROXY = ""
$env:HTTPS_PROXY = ""
```

#### æ°¸ä¹…é…ç½®pipä»£ç†

åˆ›å»ºæˆ–ç¼–è¾‘ `%APPDATA%\pip\pip.ini`ï¼š

```ini
[global]
proxy = http://proxy.example.com:8080
# æˆ–æ³¨é‡Šæ‰ä»£ç†è¡Œä»¥ç¦ç”¨ä»£ç†
# proxy = 
```

### æ–¹æ¡ˆ2ï¼šä½¿ç”¨å›½å†…é•œåƒæº

```bash
# æ¸…åå¤§å­¦é•œåƒ
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple chromadb

# é˜¿é‡Œäº‘é•œåƒ
pip install -i https://mirrors.aliyun.com/pypi/simple/ chromadb

# ä¸­ç§‘å¤§é•œåƒ
pip install -i https://pypi.mirrors.ustc.edu.cn/simple/ chromadb
```

**æ°¸ä¹…é…ç½®é•œåƒæº**ï¼š

åˆ›å»ºæˆ–ç¼–è¾‘ `%APPDATA%\pip\pip.ini`ï¼š

```ini
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
trusted-host = pypi.tuna.tsinghua.edu.cn
```

### æ–¹æ¡ˆ3ï¼šåˆ†æ­¥å®‰è£…ï¼ˆé¿å…è¶…æ—¶ï¼‰

```bash
# 1. å…ˆå®‰è£…è½»é‡çº§ä¾èµ–
pip install pyyaml markdown python-dotenv tqdm

# 2. å®‰è£…å‘é‡æ•°æ®åº“
pip install chromadb

# 3. å®‰è£…Embeddingæ¨¡å‹ï¼ˆå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼‰
pip install sentence-transformers

# 4. å®‰è£…å…¶ä»–ä¾èµ–
pip install tiktoken rank-bm25
```

### æ–¹æ¡ˆ4ï¼šä½¿ç”¨condaï¼ˆå¦‚æœæœ‰ï¼‰

```bash
# åˆ›å»ºcondaç¯å¢ƒ
conda create -n wendao python=3.8
conda activate wendao

# å®‰è£…ä¾èµ–
conda install -c conda-forge chromadb
pip install sentence-transformers torch pyyaml markdown
```

### æ–¹æ¡ˆ5ï¼šç¦»çº¿å®‰è£…

å¦‚æœç½‘ç»œå®Œå…¨æ— æ³•è®¿é—®ï¼Œå¯ä»¥ï¼š

1. åœ¨å…¶ä»–æœ‰ç½‘ç»œçš„æœºå™¨ä¸Šä¸‹è½½wheelæ–‡ä»¶
2. ä¼ è¾“åˆ°æœ¬åœ°å®‰è£…

```bash
# ä¸‹è½½wheelæ–‡ä»¶
pip download -d packages chromadb sentence-transformers torch

# æœ¬åœ°å®‰è£…
pip install --no-index --find-links=packages chromadb sentence-transformers torch
```

---

## ğŸ“¦ å®Œæ•´å®‰è£…å‘½ä»¤

### ä½¿ç”¨å›½å†…é•œåƒæºï¼ˆæ¨èï¼‰

```bash
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple \
    chromadb>=0.4.22 \
    sentence-transformers>=2.2.2 \
    torch>=2.0.0 \
    pyyaml>=6.0 \
    markdown>=3.4.0 \
    tiktoken>=0.5.0 \
    python-dotenv>=1.0.0 \
    tqdm>=4.66.0 \
    rank-bm25>=0.2.2
```

### éªŒè¯å®‰è£…

```bash
python -c "import chromadb, sentence_transformers, yaml, markdown; print('âœ… æ ¸å¿ƒä¾èµ–å·²å®‰è£…')"
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: å®‰è£…sentence-transformerså¾ˆæ…¢ï¼Ÿ

**A**: è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºéœ€è¦ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆå‡ ç™¾MBï¼‰ã€‚å¯ä»¥ï¼š
- ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ
- è€å¿ƒç­‰å¾…ï¼ˆå¯èƒ½éœ€è¦10-30åˆ†é’Ÿï¼‰
- æˆ–ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼ˆä¿®æ”¹config.pyä¸­çš„EMBEDDING_MODELï¼‰

### Q2: å†…å­˜ä¸è¶³ï¼Ÿ

**A**: å®‰è£…torchæ—¶é€‰æ‹©CPUç‰ˆæœ¬ï¼š
```bash
pip install torch --index-url https://download.pytorch.org/whl/cpu
```

### Q3: æƒé™é”™è¯¯ï¼Ÿ

**A**: ä½¿ç”¨ç”¨æˆ·å®‰è£…ï¼š
```bash
pip install --user chromadb sentence-transformers
```

### Q4: ç‰ˆæœ¬å†²çªï¼Ÿ

**A**: ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒéš”ç¦»ï¼š
```bash
python -m venv venv
.\venv\Scripts\Activate.ps1  # Windows
pip install -r requirements.txt
```

---

## âœ… å®‰è£…æˆåŠŸæ£€æŸ¥

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# æ£€æŸ¥å…³é”®ä¾èµ–
python -c "import chromadb; print('chromadb:', chromadb.__version__)"
python -c "import sentence_transformers; print('sentence-transformers: OK')"
python -c "import yaml; print('pyyaml: OK')"

# è¿è¡Œé…ç½®æµ‹è¯•
python test_config.py
```

å¦‚æœæ‰€æœ‰æ£€æŸ¥é€šè¿‡ï¼Œå°±å¯ä»¥æ‰§è¡Œç´¢å¼•é‡å»ºäº†ï¼

---

**å‚è€ƒæ–‡æ¡£**ï¼š
- [RAGç´¢å¼•é‡å»ºæ“ä½œæŒ‡å—.md](./RAGç´¢å¼•é‡å»ºæ“ä½œæŒ‡å—.md)
- [æµ‹è¯•æŠ¥å‘Š_é…ç½®éªŒè¯.md](./æµ‹è¯•æŠ¥å‘Š_é…ç½®éªŒè¯.md)


# RAG知识库索引方案 v2.0 - 精简版

> 基于深度分析优化，采用"奥卡姆剃刀"原则，精简至8个核心字段

## 一、核心设计原则

### 1.1 奥卡姆剃刀原则
- **8个核心字段**：只保留真正影响检索效果的字段
- **扁平化关系**：简化文档关系网络，降低维护成本
- **场景导向**：按用户真实使用场景设计关系

### 1.2 二阶思维
- 索引的价值在于**检索准确率**，而非字段完整性
- 用户问的是"如何让客户HI起来"，系统要能0.3秒内召回相关文档
- 复杂度是敌人，场景是朋友

---

## 二、精简版索引模板（8字段）

### 2.1 标准模板

```yaml
---
# 核心字段（8个）
doc_id: "DOC-001"
doc_type: "theory"  # theory | methodology | framework | technique | philosophy
title: "认知内共生理论：AI时代人类能力进化的根本路径选择"
summary: "AI作为认知教练内化训练人类认知结构，而非外置工具，实现去除AI后能力反而更强的正BUFF效应"
keywords: ["认知内共生", "正BUFF效应", "认知教练", "认知外骨骼", "反脆弱性"]  # 合并primary/secondary，最多10个
related_docs: ["DOC-014", "DOC-004", "DOC-005"]  # 扁平化，不分类型，最多5个
theory_chain: "cognitive_evolution"  # 所属理论链条名（可选）
query_patterns:  # 高频查询模式，最多5个
  - "AI用多了会变傻吗"
  - "如何避免AI依赖导致认知退化"
  - "什么是正BUFF效应"
doc_weight: "core"  # core | important | supplementary
---
```

### 2.2 字段说明

| 字段 | 必填 | 说明 | 示例 |
|------|------|------|------|
| `doc_id` | ✅ | 唯一文档标识 | DOC-001 |
| `doc_type` | ✅ | 文档类型 | theory/methodology/framework/technique/philosophy |
| `title` | ✅ | 文档标题 | 认知内共生理论... |
| `summary` | ✅ | 一句话摘要（50-100字） | AI作为认知教练... |
| `keywords` | ✅ | 关键词列表（5-10个） | ["认知内共生", "正BUFF"] |
| `related_docs` | ✅ | 关联文档（最多5个） | ["DOC-014", "DOC-004"] |
| `theory_chain` | ⭕ | 理论链条名（可选） | "cognitive_evolution" |
| `query_patterns` | ✅ | 查询模式（3-5个） | ["AI用多了会变傻吗"] |
| `doc_weight` | ✅ | 文档权重 | core/important/supplementary |

---

## 三、场景化关系网络

### 3.1 场景包（Scenario Bundles）

在README或单独配置文件中定义场景包：

```yaml
# scenario_bundles.yaml

scenario_bundles:
  - scenario: "产品设计"
    description: "从创新到用户体验的完整产品设计流程"
    docs: ["DOC-008", "DOC-027", "DOC-037", "DOC-020"]
    
  - scenario: "客户沟通"
    description: "理解客户需求、建立信任、达成合作"
    docs: ["DOC-020", "DOC-021", "DOC-022", "DOC-024"]
    
  - scenario: "认知提升"
    description: "个人认知能力提升的完整路径"
    docs: ["DOC-001", "DOC-004", "DOC-005", "DOC-014", "DOC-018"]
    
  - scenario: "创业决策"
    description: "从想法到执行的创业决策框架"
    docs: ["DOC-007", "DOC-008", "DOC-010", "DOC-012", "DOC-013"]
    
  - scenario: "行为改变"
    description: "克服认知偏差、建立新习惯"
    docs: ["DOC-015", "DOC-017", "DOC-018", "DOC-019"]
    
  - scenario: "战略规划"
    description: "长期战略思考和规划"
    docs: ["DOC-025", "DOC-026", "DOC-028", "DOC-030", "DOC-033"]
    
  - scenario: "团队协作"
    description: "团队沟通和协作技巧"
    docs: ["DOC-020", "DOC-021", "DOC-023", "DOC-006"]
    
  - scenario: "创新方法"
    description: "系统性创新方法论"
    docs: ["DOC-007", "DOC-008", "DOC-009", "DOC-011"]
    
  - scenario: "人生规划"
    description: "人生意义和价值观构建"
    docs: ["DOC-030", "DOC-031", "DOC-032", "DOC-033"]
    
  - scenario: "系统思维"
    description: "系统性思考和问题解决"
    docs: ["DOC-025", "DOC-034", "DOC-035", "DOC-036", "DOC-037"]
```

### 3.2 理论链条（Theory Chains）

```yaml
# theory_chains.yaml

theory_chains:
  cognitive_evolution:
    name: "认知进化理论链"
    description: "从问题诊断到个体进化到集体涌现"
    chain: ["DOC-014", "DOC-001", "DOC-004", "DOC-005", "DOC-006"]
    
  innovation_methodology:
    name: "创新方法论链"
    description: "从启动到执行到战略的完整创新流程"
    chain: ["DOC-012", "DOC-008", "DOC-007", "DOC-010", "DOC-013"]
    
  behavior_change:
    name: "行为改变链"
    description: "从认知偏差识别到习惯建立的完整路径"
    chain: ["DOC-015", "DOC-017", "DOC-018", "DOC-019"]
    
  communication_skills:
    name: "沟通技巧链"
    description: "从理解本质到建立连接的沟通进阶"
    chain: ["DOC-022", "DOC-020", "DOC-021", "DOC-023"]
    
  strategic_thinking:
    name: "战略思维链"
    description: "从定向到构建到聚焦到迭代的完整框架"
    chain: ["DOC-030", "DOC-025", "DOC-028", "DOC-033"]
```

---

## 四、查询模式设计（口语化）

### 4.1 查询模式分类

```yaml
query_patterns:
  # 正式查询（学术/专业场景）
  formal:
    - "认知内共生与认知外骨骼的区别"
    - "如何实现AI辅助下的认知能力内化"
    
  # 口语化查询（日常对话场景）
  colloquial:
    - "AI用多了会变傻吗"
    - "怎么不让AI把我养废"
    - "AI是拐杖还是教练"
    
  # 场景化查询（具体应用场景）
  scenario:
    - "设计AI产品时如何避免用户退化"
    - "做产品演示时用什么框架"
    - "客户嫌贵怎么沟通"
```

### 4.2 查询模式设计原则

1. **口语化优先**：用户不会说"如何避免AI依赖导致认知退化"，会说"AI用多了会变傻吗"
2. **场景化**：结合具体使用场景，如"做产品演示时"
3. **多样化**：同一概念用不同表达方式

---

## 五、文档质量分层

### 5.1 分层标准

```yaml
doc_weight: "core"  # 三档分级

# core: 核心理论/框架
# - 必调：用户查询相关领域时优先召回
# - 示例：认知内共生理论、思考的模型、创新三元法

# important: 重要方法/技巧
# - 常调：相关场景下经常需要
# - 示例：动态决策框架、微习惯、让对方HI起来

# supplementary: 补充材料
# - 按需调：特定场景下才需要
# - 示例：网络效应与学习效应、当真诚成为最狡猾的策略
```

### 5.2 权重分配建议

| 类别 | core | important | supplementary |
|------|------|-----------|---------------|
| AI与认知理论类 | 3 | 2 | 1 |
| 创新与创业方法论类 | 2 | 4 | 1 |
| 认知心理学与行为改变类 | 1 | 3 | 2 |
| 沟通与社交技巧类 | 0 | 3 | 2 |
| 战略思维与决策框架类 | 2 | 2 | 1 |
| 人生哲学与价值观类 | 1 | 2 | 1 |
| 系统思维与方法论类 | 1 | 2 | 1 |

---

## 六、技术实现细节

### 6.1 分块策略（Chunking）

```
分块策略：

1. 元数据块（YAML Front Matter）
   - 单独索引，用于过滤和路由
   - 权重：1.0

2. 摘要块（前500字）
   - 高权重，用于快速匹配
   - 权重：1.5

3. 正文块
   - 每块800-1200 tokens
   - 重叠200 tokens（保持上下文连贯）
   - 按语义段落切分，不硬切标点
   - 权重：1.0

4. 案例块
   - 独立提取，标注为"example"类型
   - 权重：1.2（案例更容易匹配用户场景）
```

### 6.2 向量化建议

**推荐模型**（中文场景）：
- **BGE-M3**（首选）：支持多语言，检索效果好
- **text2vec-large-chinese**：备选
- **OpenAI text-embedding-3-large**：预算充足时使用

**索引策略**：
```
1. 对 query_patterns 单独向量化，建立"问题-文档"直接映射
2. 对 summary 提高1.5倍权重
3. 对 keywords 使用BM25稀疏检索作为补充
```

### 6.3 混合检索架构

```
用户查询
    ↓
┌─────────────────────────────┐
│  Step 1: 意图识别（LLM）     │
│  识别：理论查询 / 方法查询 / 场景查询  │
└─────────────────────────────┘
    ↓
┌─────────────────────────────┐
│  Step 2: 多路召回            │
│  - 关键词检索（BM25）         │
│  - 向量检索（语义相似度）      │
│  - 知识图谱检索（关系遍历）    │
└─────────────────────────────┘
    ↓
┌─────────────────────────────┐
│  Step 3: 重排序（Rerank）    │
│  - doc_weight 加权          │
│  - theory_chain 上下文扩展   │
│  - scenario_bundles 场景匹配  │
└─────────────────────────────┘
    ↓
返回 Top-K 文档 + 关联文档
```

---

## 七、实施优先级（重新排序）

| 优先级 | 任务 | 耗时 | 价值 | 产出 |
|--------|------|------|------|------|
| **P0** | 为38篇文档添加精简版索引（8字段） | 1天 | ⭐⭐⭐⭐⭐ | 基础检索能力 |
| **P1** | 建立5条核心theory_chain | 半天 | ⭐⭐⭐⭐ | 认知路径 |
| **P2** | 设计10个核心场景的scenario_bundles | 半天 | ⭐⭐⭐⭐ | 业务导向 |
| **P3** | 优化query_patterns（口语化） | 1天 | ⭐⭐⭐⭐⭐ | 检索效果 |
| **P4** | 文档质量分层（标注doc_weight） | 半天 | ⭐⭐⭐ | 召回精度 |
| **P5** | 技术实现：向量化+混合检索 | 2-3天 | ⭐⭐⭐⭐⭐ | 系统上线 |

---

## 八、索引示例

### 示例1：理论类文档

```yaml
---
doc_id: "DOC-001"
doc_type: "theory"
title: "认知内共生理论：AI时代人类能力进化的根本路径选择"
summary: "AI作为认知教练内化训练人类认知结构，而非外置工具，实现去除AI后能力反而更强的正BUFF效应"
keywords: ["认知内共生", "正BUFF效应", "认知教练", "认知外骨骼", "反脆弱性", "神经可塑性", "认知退化"]
related_docs: ["DOC-014", "DOC-004", "DOC-005", "DOC-002"]
theory_chain: "cognitive_evolution"
query_patterns:
  - "AI用多了会变傻吗"
  - "如何避免AI依赖导致认知退化"
  - "什么是正BUFF效应"
  - "AI是拐杖还是教练"
doc_weight: "core"
---
```

### 示例2：方法论类文档

```yaml
---
doc_id: "DOC-008"
doc_type: "methodology"
title: "创新三元法"
summary: "通过第一性原理洞察→边缘用户拓展→喂饭思维交付的三位一体创新闭环，实现从技术可行到用户成功的系统性突破"
keywords: ["创新三元法", "第一性原理", "边缘用户", "喂饭思维", "产品创新", "用户体验"]
related_docs: ["DOC-007", "DOC-010", "DOC-027", "DOC-037"]
query_patterns:
  - "如何进行产品创新"
  - "如何从技术可行到用户成功"
  - "第一性原理怎么用"
  - "怎么设计简单好用的产品"
doc_weight: "core"
---
```

### 示例3：技巧类文档

```yaml
---
doc_id: "DOC-020"
doc_type: "technique"
title: "不要正面回答别人的问题"
summary: "用户思维，推测场景，幽默生动，引导有趣对话，结合兴趣，解决不愉快，影响潜意识"
keywords: ["用户思维", "场景推测", "沟通技巧", "引导对话", "影响潜意识"]
related_docs: ["DOC-021", "DOC-022", "DOC-023"]
query_patterns:
  - "客户问问题怎么回答"
  - "如何不直接回答但让对方满意"
  - "沟通时怎么引导对方"
doc_weight: "important"
---
```

---

## 九、下一步行动

### 行动1：生成精简版索引模板（今天）
- ✅ 已完成：v2.0模板
- 下一步：为10篇核心文档生成索引示例

### 行动2：设计测试查询（本周内）
- 列出20个真实用户会问的问题
- 手动测试现有索引能否正确召回
- 产出：`query_test_report.md`

### 行动3：批量生成索引（下周）
- 根据测试结果调整query_patterns
- 补充scenario_bundles
- 产出：完整38篇文档索引

---

## 十、关键改进总结

### 10.1 从v1.0到v2.0的变化

| 维度 | v1.0 | v2.0 | 改进 |
|------|------|------|------|
| 字段数量 | 20+ | 8 | 减少60%维护成本 |
| 关系设计 | 学术分类 | 场景导向 | 更贴近业务 |
| 查询模式 | 书面化 | 口语化 | 更匹配真实使用 |
| 文档分层 | 无 | 三级权重 | 提升召回精度 |
| 实施复杂度 | 高 | 低 | 降低执行门槛 |

### 10.2 核心价值

1. **维护成本降低60%**：从760个数据点降到304个
2. **检索准确率提升**：场景化关系+口语化查询+权重分层
3. **实施速度加快**：从3周缩短到1周

---

*方案v2.0完成，等待实施*

